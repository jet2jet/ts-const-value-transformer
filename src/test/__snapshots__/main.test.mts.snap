// Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing

exports[`createTransformer and printSourceWithMap test with default options: source map object 1`] = `
{
  "mappings": "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",
  "names": [
    "undefined",
    "constValue1",
    "constValue2",
    "constValue3",
    "constValue4",
    "constValue5",
    "constValue6",
    "constValue7",
    "constValue8",
    "constValue10",
    "constValue11",
    "ts.SyntaxKind.AnyKeyword",
    "ts.versionMajorMinor",
    "versionMajorMinor",
    "vmm",
    "mod.Hoge",
    "mod.Piyo",
    "constObject.a",
    "constObject.b",
    "constObject.c",
    "constObject.d",
    "constObject.e",
    "constObject.f",
    "constObject.g",
    "constObject.h.h1",
    "constObject.h.h2",
    "BarEnum.A",
    "BarEnum.B",
    "BazEnum.C",
    "BazEnum.D",
    "a",
    "b2",
    "e",
    "u",
  ],
  "sources": [
    "index.mts",
  ],
  "sourcesContent": [
    "import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = undefined;

console.log(
  constValue1,
  constValue2,
  constValue3,
  /* the comment */
  /* the comment */
  constValue4,
  /* the comment */
  constValue5,
  constValue6 /* the comment */,
  constValue7,
  /* the comment */
  constValue8.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  constValue10,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  constValue11 || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  constValue1 ? constValue2 : constValue3
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  ts.versionMajorMinor,
  versionMajorMinor,
  vmm
);

console.log(mod.Hoge, (n as number) === mod.Hoge || (n as number) === mod.Piyo);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: undefined,
  f: 20n,
  g: -30n,
  h: {
    h1: constValue1,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  constObject.a,
  constObject.b,
  constObject.c,
  constObject.d,
  constObject.e,
  constObject.f,
  constObject.g,
  constObject.h,
  constObject.h.h1,
  constObject.h.h2,
  constObject.h.h3,
  //
  constObject.a.toString(),
  constObject.b.toString(),
  constObject.c.toString(),
  constObject.f.toString(),
  constObject.g.toString(),
  constObject.h.h1.toString(),
  constObject.h.h2.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(BarEnum.A, BarEnum.B);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(BazEnum.C, BazEnum.D);

(() => {
  const { a, b: b2, e = constValue3 } = constObject;
  console.log(a, b2, e);
})();

((x: number = constValue2) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (u == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
",
  ],
  "version": 3,
}
`;

exports[`createTransformer and printSourceWithMap test with default options: transformed source 1`] = `
"import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = void 0 /* undefined */;

console.log(
  1 /* constValue1 */,
  0.1 /* constValue2 */,
  -1 /* constValue3 */,
  /* the comment */
  /* the comment */
  "foo" /* constValue4 */,
  /* the comment */
  true /* constValue5 */,
  10n /* constValue6 */ /* the comment */,
  -10n /* constValue7 */,
  /* the comment */
  "aaa\\nbbb" /* constValue8 */.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  true /* constValue10 */,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  void 0 /* constValue11 */ || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  1 /* constValue1 */ ? 0.1 /* constValue2 */ : -1 /* constValue3 */
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  133 /* ts.SyntaxKind.AnyKeyword */,
  "5.5" /* ts.versionMajorMinor */,
  "5.5" /* versionMajorMinor */,
  "5.5" /* vmm */
);

console.log(1 /* mod.Hoge */, (n as number) === 1 /* mod.Hoge */ || (n as number) === 2 /* mod.Piyo */);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: void 0 /* undefined */,
  f: 20n,
  g: -30n,
  h: {
    h1: 1 /* constValue1 */,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  4 /* constObject.a */,
  "bar" /* constObject.b */,
  false /* constObject.c */,
  null /* constObject.d */,
  void 0 /* constObject.e */,
  20n /* constObject.f */,
  -30n /* constObject.g */,
  constObject.h,
  1 /* constObject.h.h1 */,
  -3.14 /* constObject.h.h2 */,
  constObject.h.h3,
  //
  4 /* constObject.a */.toString(),
  "bar" /* constObject.b */.toString(),
  false /* constObject.c */.toString(),
  20n /* constObject.f */.toString(),
  -30n /* constObject.g */.toString(),
  1 /* constObject.h.h1 */.toString(),
  -3.14 /* constObject.h.h2 */.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(1 /* BarEnum.A */, "hoge" /* BarEnum.B */);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(2 /* BazEnum.C */, "piyo" /* BazEnum.D */);

(() => {
  const { a, b: b2, e = -1 /* constValue3 */ } = constObject;
  console.log(4 /* a */, "bar" /* b2 */, -1 /* e */);
})();

((x: number = 0.1 /* constValue2 */) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (void 0 /* u */ == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
"
`;

exports[`createTransformer and printSourceWithMap test with hoistEnumValues=false: source map object 1`] = `
{
  "mappings": "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",
  "names": [
    "undefined",
    "constValue1",
    "constValue2",
    "constValue3",
    "constValue4",
    "constValue5",
    "constValue6",
    "constValue7",
    "constValue8",
    "constValue10",
    "constValue11",
    "ts.versionMajorMinor",
    "versionMajorMinor",
    "vmm",
    "mod.Hoge",
    "mod.Piyo",
    "constObject.a",
    "constObject.b",
    "constObject.c",
    "constObject.d",
    "constObject.e",
    "constObject.f",
    "constObject.g",
    "constObject.h.h1",
    "constObject.h.h2",
    "a",
    "b2",
    "e",
    "u",
  ],
  "sources": [
    "index.mts",
  ],
  "sourcesContent": [
    "import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = undefined;

console.log(
  constValue1,
  constValue2,
  constValue3,
  /* the comment */
  /* the comment */
  constValue4,
  /* the comment */
  constValue5,
  constValue6 /* the comment */,
  constValue7,
  /* the comment */
  constValue8.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  constValue10,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  constValue11 || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  constValue1 ? constValue2 : constValue3
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  ts.versionMajorMinor,
  versionMajorMinor,
  vmm
);

console.log(mod.Hoge, (n as number) === mod.Hoge || (n as number) === mod.Piyo);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: undefined,
  f: 20n,
  g: -30n,
  h: {
    h1: constValue1,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  constObject.a,
  constObject.b,
  constObject.c,
  constObject.d,
  constObject.e,
  constObject.f,
  constObject.g,
  constObject.h,
  constObject.h.h1,
  constObject.h.h2,
  constObject.h.h3,
  //
  constObject.a.toString(),
  constObject.b.toString(),
  constObject.c.toString(),
  constObject.f.toString(),
  constObject.g.toString(),
  constObject.h.h1.toString(),
  constObject.h.h2.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(BarEnum.A, BarEnum.B);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(BazEnum.C, BazEnum.D);

(() => {
  const { a, b: b2, e = constValue3 } = constObject;
  console.log(a, b2, e);
})();

((x: number = constValue2) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (u == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
",
  ],
  "version": 3,
}
`;

exports[`createTransformer and printSourceWithMap test with hoistEnumValues=false: transformed source 1`] = `
"import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = void 0 /* undefined */;

console.log(
  1 /* constValue1 */,
  0.1 /* constValue2 */,
  -1 /* constValue3 */,
  /* the comment */
  /* the comment */
  "foo" /* constValue4 */,
  /* the comment */
  true /* constValue5 */,
  10n /* constValue6 */ /* the comment */,
  -10n /* constValue7 */,
  /* the comment */
  "aaa\\nbbb" /* constValue8 */.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  true /* constValue10 */,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  void 0 /* constValue11 */ || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  1 /* constValue1 */ ? 0.1 /* constValue2 */ : -1 /* constValue3 */
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  "5.5" /* ts.versionMajorMinor */,
  "5.5" /* versionMajorMinor */,
  "5.5" /* vmm */
);

console.log(1 /* mod.Hoge */, (n as number) === 1 /* mod.Hoge */ || (n as number) === 2 /* mod.Piyo */);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: void 0 /* undefined */,
  f: 20n,
  g: -30n,
  h: {
    h1: 1 /* constValue1 */,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  4 /* constObject.a */,
  "bar" /* constObject.b */,
  false /* constObject.c */,
  null /* constObject.d */,
  void 0 /* constObject.e */,
  20n /* constObject.f */,
  -30n /* constObject.g */,
  constObject.h,
  1 /* constObject.h.h1 */,
  -3.14 /* constObject.h.h2 */,
  constObject.h.h3,
  //
  4 /* constObject.a */.toString(),
  "bar" /* constObject.b */.toString(),
  false /* constObject.c */.toString(),
  20n /* constObject.f */.toString(),
  -30n /* constObject.g */.toString(),
  1 /* constObject.h.h1 */.toString(),
  -3.14 /* constObject.h.h2 */.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(BarEnum.A, BarEnum.B);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(BazEnum.C, BazEnum.D);

(() => {
  const { a, b: b2, e = -1 /* constValue3 */ } = constObject;
  console.log(4 /* a */, "bar" /* b2 */, -1 /* e */);
})();

((x: number = 0.1 /* constValue2 */) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (void 0 /* u */ == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
"
`;

exports[`createTransformer and printSourceWithMap test with hoistExternalValues=false: source map object 1`] = `
{
  "mappings": "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",
  "names": [
    "undefined",
    "constValue1",
    "constValue2",
    "constValue3",
    "constValue4",
    "constValue5",
    "constValue6",
    "constValue7",
    "constValue8",
    "constValue10",
    "constValue11",
    "mod.Hoge",
    "mod.Piyo",
    "constObject.a",
    "constObject.b",
    "constObject.c",
    "constObject.d",
    "constObject.e",
    "constObject.f",
    "constObject.g",
    "constObject.h.h1",
    "constObject.h.h2",
    "BarEnum.A",
    "BarEnum.B",
    "BazEnum.C",
    "BazEnum.D",
    "a",
    "b2",
    "e",
    "u",
  ],
  "sources": [
    "index.mts",
  ],
  "sourcesContent": [
    "import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = undefined;

console.log(
  constValue1,
  constValue2,
  constValue3,
  /* the comment */
  /* the comment */
  constValue4,
  /* the comment */
  constValue5,
  constValue6 /* the comment */,
  constValue7,
  /* the comment */
  constValue8.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  constValue10,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  constValue11 || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  constValue1 ? constValue2 : constValue3
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  ts.versionMajorMinor,
  versionMajorMinor,
  vmm
);

console.log(mod.Hoge, (n as number) === mod.Hoge || (n as number) === mod.Piyo);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: undefined,
  f: 20n,
  g: -30n,
  h: {
    h1: constValue1,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  constObject.a,
  constObject.b,
  constObject.c,
  constObject.d,
  constObject.e,
  constObject.f,
  constObject.g,
  constObject.h,
  constObject.h.h1,
  constObject.h.h2,
  constObject.h.h3,
  //
  constObject.a.toString(),
  constObject.b.toString(),
  constObject.c.toString(),
  constObject.f.toString(),
  constObject.g.toString(),
  constObject.h.h1.toString(),
  constObject.h.h2.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(BarEnum.A, BarEnum.B);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(BazEnum.C, BazEnum.D);

(() => {
  const { a, b: b2, e = constValue3 } = constObject;
  console.log(a, b2, e);
})();

((x: number = constValue2) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (u == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
",
  ],
  "version": 3,
}
`;

exports[`createTransformer and printSourceWithMap test with hoistExternalValues=false: transformed source 1`] = `
"import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = void 0 /* undefined */;

console.log(
  1 /* constValue1 */,
  0.1 /* constValue2 */,
  -1 /* constValue3 */,
  /* the comment */
  /* the comment */
  "foo" /* constValue4 */,
  /* the comment */
  true /* constValue5 */,
  10n /* constValue6 */ /* the comment */,
  -10n /* constValue7 */,
  /* the comment */
  "aaa\\nbbb" /* constValue8 */.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  true /* constValue10 */,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  void 0 /* constValue11 */ || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  1 /* constValue1 */ ? 0.1 /* constValue2 */ : -1 /* constValue3 */
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  ts.versionMajorMinor,
  versionMajorMinor,
  vmm
);

console.log(1 /* mod.Hoge */, (n as number) === 1 /* mod.Hoge */ || (n as number) === 2 /* mod.Piyo */);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: void 0 /* undefined */,
  f: 20n,
  g: -30n,
  h: {
    h1: 1 /* constValue1 */,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  4 /* constObject.a */,
  "bar" /* constObject.b */,
  false /* constObject.c */,
  null /* constObject.d */,
  void 0 /* constObject.e */,
  20n /* constObject.f */,
  -30n /* constObject.g */,
  constObject.h,
  1 /* constObject.h.h1 */,
  -3.14 /* constObject.h.h2 */,
  constObject.h.h3,
  //
  4 /* constObject.a */.toString(),
  "bar" /* constObject.b */.toString(),
  false /* constObject.c */.toString(),
  20n /* constObject.f */.toString(),
  -30n /* constObject.g */.toString(),
  1 /* constObject.h.h1 */.toString(),
  -3.14 /* constObject.h.h2 */.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(1 /* BarEnum.A */, "hoge" /* BarEnum.B */);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(2 /* BazEnum.C */, "piyo" /* BazEnum.D */);

(() => {
  const { a, b: b2, e = -1 /* constValue3 */ } = constObject;
  console.log(4 /* a */, "bar" /* b2 */, -1 /* e */);
})();

((x: number = 0.1 /* constValue2 */) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (void 0 /* u */ == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
"
`;

exports[`createTransformer and printSourceWithMap test with hoistProperty=false: source map object 1`] = `
{
  "mappings": "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",
  "names": [
    "undefined",
    "constValue1",
    "constValue2",
    "constValue3",
    "constValue4",
    "constValue5",
    "constValue6",
    "constValue7",
    "constValue8",
    "constValue10",
    "constValue11",
    "ts.SyntaxKind.AnyKeyword",
    "versionMajorMinor",
    "vmm",
    "BarEnum.A",
    "BarEnum.B",
    "BazEnum.C",
    "BazEnum.D",
    "a",
    "b2",
    "e",
    "u",
  ],
  "sources": [
    "index.mts",
  ],
  "sourcesContent": [
    "import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = undefined;

console.log(
  constValue1,
  constValue2,
  constValue3,
  /* the comment */
  /* the comment */
  constValue4,
  /* the comment */
  constValue5,
  constValue6 /* the comment */,
  constValue7,
  /* the comment */
  constValue8.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  constValue10,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  constValue11 || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  constValue1 ? constValue2 : constValue3
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  ts.versionMajorMinor,
  versionMajorMinor,
  vmm
);

console.log(mod.Hoge, (n as number) === mod.Hoge || (n as number) === mod.Piyo);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: undefined,
  f: 20n,
  g: -30n,
  h: {
    h1: constValue1,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  constObject.a,
  constObject.b,
  constObject.c,
  constObject.d,
  constObject.e,
  constObject.f,
  constObject.g,
  constObject.h,
  constObject.h.h1,
  constObject.h.h2,
  constObject.h.h3,
  //
  constObject.a.toString(),
  constObject.b.toString(),
  constObject.c.toString(),
  constObject.f.toString(),
  constObject.g.toString(),
  constObject.h.h1.toString(),
  constObject.h.h2.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(BarEnum.A, BarEnum.B);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(BazEnum.C, BazEnum.D);

(() => {
  const { a, b: b2, e = constValue3 } = constObject;
  console.log(a, b2, e);
})();

((x: number = constValue2) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (u == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
",
  ],
  "version": 3,
}
`;

exports[`createTransformer and printSourceWithMap test with hoistProperty=false: transformed source 1`] = `
"import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = void 0 /* undefined */;

console.log(
  1 /* constValue1 */,
  0.1 /* constValue2 */,
  -1 /* constValue3 */,
  /* the comment */
  /* the comment */
  "foo" /* constValue4 */,
  /* the comment */
  true /* constValue5 */,
  10n /* constValue6 */ /* the comment */,
  -10n /* constValue7 */,
  /* the comment */
  "aaa\\nbbb" /* constValue8 */.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  true /* constValue10 */,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  void 0 /* constValue11 */ || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  1 /* constValue1 */ ? 0.1 /* constValue2 */ : -1 /* constValue3 */
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  133 /* ts.SyntaxKind.AnyKeyword */,
  ts.versionMajorMinor,
  "5.5" /* versionMajorMinor */,
  "5.5" /* vmm */
);

console.log(mod.Hoge, (n as number) === mod.Hoge || (n as number) === mod.Piyo);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: void 0 /* undefined */,
  f: 20n,
  g: -30n,
  h: {
    h1: 1 /* constValue1 */,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  constObject.a,
  constObject.b,
  constObject.c,
  constObject.d,
  constObject.e,
  constObject.f,
  constObject.g,
  constObject.h,
  constObject.h.h1,
  constObject.h.h2,
  constObject.h.h3,
  //
  constObject.a.toString(),
  constObject.b.toString(),
  constObject.c.toString(),
  constObject.f.toString(),
  constObject.g.toString(),
  constObject.h.h1.toString(),
  constObject.h.h2.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(1 /* BarEnum.A */, "hoge" /* BarEnum.B */);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(2 /* BazEnum.C */, "piyo" /* BazEnum.D */);

(() => {
  const { a, b: b2, e = -1 /* constValue3 */ } = constObject;
  console.log(4 /* a */, "bar" /* b2 */, -1 /* e */);
})();

((x: number = 0.1 /* constValue2 */) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (void 0 /* u */ == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
"
`;

exports[`createTransformer and printSourceWithMap test with hoistPureFunctionCall: source map object 1`] = `
{
  "mappings": "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",
  "names": [
    "undefined",
    "constValue1",
    "constValue2",
    "constValue3",
    "constValue4",
    "constValue5",
    "constValue6",
    "constValue7",
    "constValue8",
    "constValue10",
    "constValue11",
    "ts.SyntaxKind.AnyKeyword",
    "ts.versionMajorMinor",
    "versionMajorMinor",
    "vmm",
    "mod.Hoge",
    "mod.Piyo",
    "constObject.a",
    "constObject.b",
    "constObject.c",
    "constObject.d",
    "constObject.e",
    "constObject.f",
    "constObject.g",
    "constObject.h.h1",
    "constObject.h.h2",
    "BarEnum.A",
    "BarEnum.B",
    "BazEnum.C",
    "BazEnum.D",
    "a",
    "b2",
    "e",
    "fn2()",
    "u",
  ],
  "sources": [
    "index.mts",
  ],
  "sourcesContent": [
    "import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = undefined;

console.log(
  constValue1,
  constValue2,
  constValue3,
  /* the comment */
  /* the comment */
  constValue4,
  /* the comment */
  constValue5,
  constValue6 /* the comment */,
  constValue7,
  /* the comment */
  constValue8.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  constValue10,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  constValue11 || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  constValue1 ? constValue2 : constValue3
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  ts.versionMajorMinor,
  versionMajorMinor,
  vmm
);

console.log(mod.Hoge, (n as number) === mod.Hoge || (n as number) === mod.Piyo);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: undefined,
  f: 20n,
  g: -30n,
  h: {
    h1: constValue1,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  constObject.a,
  constObject.b,
  constObject.c,
  constObject.d,
  constObject.e,
  constObject.f,
  constObject.g,
  constObject.h,
  constObject.h.h1,
  constObject.h.h2,
  constObject.h.h3,
  //
  constObject.a.toString(),
  constObject.b.toString(),
  constObject.c.toString(),
  constObject.f.toString(),
  constObject.g.toString(),
  constObject.h.h1.toString(),
  constObject.h.h2.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(BarEnum.A, BarEnum.B);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(BazEnum.C, BazEnum.D);

(() => {
  const { a, b: b2, e = constValue3 } = constObject;
  console.log(a, b2, e);
})();

((x: number = constValue2) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (u == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
",
  ],
  "version": 3,
}
`;

exports[`createTransformer and printSourceWithMap test with hoistPureFunctionCall: transformed source 1`] = `
"import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = void 0 /* undefined */;

console.log(
  1 /* constValue1 */,
  0.1 /* constValue2 */,
  -1 /* constValue3 */,
  /* the comment */
  /* the comment */
  "foo" /* constValue4 */,
  /* the comment */
  true /* constValue5 */,
  10n /* constValue6 */ /* the comment */,
  -10n /* constValue7 */,
  /* the comment */
  "aaa\\nbbb" /* constValue8 */.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  true /* constValue10 */,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  void 0 /* constValue11 */ || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  1 /* constValue1 */ ? 0.1 /* constValue2 */ : -1 /* constValue3 */
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  133 /* ts.SyntaxKind.AnyKeyword */,
  "5.5" /* ts.versionMajorMinor */,
  "5.5" /* versionMajorMinor */,
  "5.5" /* vmm */
);

console.log(1 /* mod.Hoge */, (n as number) === 1 /* mod.Hoge */ || (n as number) === 2 /* mod.Piyo */);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: void 0 /* undefined */,
  f: 20n,
  g: -30n,
  h: {
    h1: 1 /* constValue1 */,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  4 /* constObject.a */,
  "bar" /* constObject.b */,
  false /* constObject.c */,
  null /* constObject.d */,
  void 0 /* constObject.e */,
  20n /* constObject.f */,
  -30n /* constObject.g */,
  constObject.h,
  1 /* constObject.h.h1 */,
  -3.14 /* constObject.h.h2 */,
  constObject.h.h3,
  //
  4 /* constObject.a */.toString(),
  "bar" /* constObject.b */.toString(),
  false /* constObject.c */.toString(),
  20n /* constObject.f */.toString(),
  -30n /* constObject.g */.toString(),
  1 /* constObject.h.h1 */.toString(),
  -3.14 /* constObject.h.h2 */.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(1 /* BarEnum.A */, "hoge" /* BarEnum.B */);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(2 /* BazEnum.C */, "piyo" /* BazEnum.D */);

(() => {
  const { a, b: b2, e = -1 /* constValue3 */ } = constObject;
  console.log(4 /* a */, "bar" /* b2 */, -1 /* e */);
})();

((x: number = 0.1 /* constValue2 */) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ 12345 /* fn2() */, /*#__PURE__*/ 12345 /* fn2() */);

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (void 0 /* u */ == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
"
`;

exports[`createTransformer and printSourceWithMap test with unsafeHoistAsExpresion: source map object 1`] = `
{
  "mappings": "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",
  "names": [
    "undefined",
    "constValue1",
    "constValue2",
    "constValue3",
    "constValue4",
    "constValue5",
    "constValue6",
    "constValue7",
    "constValue8",
    "(n as 10)",
    "constValue10",
    "constValue11",
    "ts.SyntaxKind.AnyKeyword",
    "ts.versionMajorMinor",
    "versionMajorMinor",
    "vmm",
    "mod.Hoge",
    "mod.Piyo",
    "constObject.a",
    "constObject.b",
    "constObject.c",
    "constObject.d",
    "constObject.e",
    "constObject.f",
    "constObject.g",
    "constObject.h.h1",
    "constObject.h.h2",
    "(o as typeof constObject).a",
    "(o as typeof constObject).h.h1",
    "BarEnum.A",
    "BarEnum.B",
    "BazEnum.C",
    "BazEnum.D",
    "a",
    "b2",
    "e",
    "12345 as const",
    "u",
  ],
  "sources": [
    "index.mts",
  ],
  "sourcesContent": [
    "import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = undefined;

console.log(
  constValue1,
  constValue2,
  constValue3,
  /* the comment */
  /* the comment */
  constValue4,
  /* the comment */
  constValue5,
  constValue6 /* the comment */,
  constValue7,
  /* the comment */
  constValue8.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  constValue10,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  constValue11 || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  constValue1 ? constValue2 : constValue3
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  ts.versionMajorMinor,
  versionMajorMinor,
  vmm
);

console.log(mod.Hoge, (n as number) === mod.Hoge || (n as number) === mod.Piyo);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: undefined,
  f: 20n,
  g: -30n,
  h: {
    h1: constValue1,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  constObject.a,
  constObject.b,
  constObject.c,
  constObject.d,
  constObject.e,
  constObject.f,
  constObject.g,
  constObject.h,
  constObject.h.h1,
  constObject.h.h2,
  constObject.h.h3,
  //
  constObject.a.toString(),
  constObject.b.toString(),
  constObject.c.toString(),
  constObject.f.toString(),
  constObject.g.toString(),
  constObject.h.h1.toString(),
  constObject.h.h2.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(BarEnum.A, BarEnum.B);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(BazEnum.C, BazEnum.D);

(() => {
  const { a, b: b2, e = constValue3 } = constObject;
  console.log(a, b2, e);
})();

((x: number = constValue2) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (u == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
",
  ],
  "version": 3,
}
`;

exports[`createTransformer and printSourceWithMap test with unsafeHoistAsExpresion: transformed source 1`] = `
"import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = void 0 /* undefined */;

console.log(
  1 /* constValue1 */,
  0.1 /* constValue2 */,
  -1 /* constValue3 */,
  /* the comment */
  /* the comment */
  "foo" /* constValue4 */,
  /* the comment */
  true /* constValue5 */,
  10n /* constValue6 */ /* the comment */,
  -10n /* constValue7 */,
  /* the comment */
  "aaa\\nbbb" /* constValue8 */.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  10 /* (n as 10) */.toString(),
  true /* constValue10 */,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  void 0 /* constValue11 */ || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  1 /* constValue1 */ ? 0.1 /* constValue2 */ : -1 /* constValue3 */
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  133 /* ts.SyntaxKind.AnyKeyword */,
  "5.5" /* ts.versionMajorMinor */,
  "5.5" /* versionMajorMinor */,
  "5.5" /* vmm */
);

console.log(1 /* mod.Hoge */, (n as number) === 1 /* mod.Hoge */ || (n as number) === 2 /* mod.Piyo */);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: void 0 /* undefined */,
  f: 20n,
  g: -30n,
  h: {
    h1: 1 /* constValue1 */,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  4 /* constObject.a */,
  "bar" /* constObject.b */,
  false /* constObject.c */,
  null /* constObject.d */,
  void 0 /* constObject.e */,
  20n /* constObject.f */,
  -30n /* constObject.g */,
  constObject.h,
  1 /* constObject.h.h1 */,
  -3.14 /* constObject.h.h2 */,
  constObject.h.h3,
  //
  4 /* constObject.a */.toString(),
  "bar" /* constObject.b */.toString(),
  false /* constObject.c */.toString(),
  20n /* constObject.f */.toString(),
  -30n /* constObject.g */.toString(),
  1 /* constObject.h.h1 */.toString(),
  -3.14 /* constObject.h.h2 */.toString()
);

// don't transform here
declare let o: object;
console.log(4 /* (o as typeof constObject).a */);
console.log(1 /* (o as typeof constObject).h.h1 */);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(1 /* BarEnum.A */, "hoge" /* BarEnum.B */);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(2 /* BazEnum.C */, "piyo" /* BazEnum.D */);

(() => {
  const { a, b: b2, e = -1 /* constValue3 */ } = constObject;
  console.log(4 /* a */, "bar" /* b2 */, -1 /* e */);
})();

((x: number = 0.1 /* constValue2 */) => {
  console.log(x);
})();

function fn2() {
  return 12345 /* 12345 as const */;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (void 0 /* u */ == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
"
`;

exports[`createTransformer and printSourceWithMap test with unsafeHoistFunctionCall: source map object 1`] = `
{
  "mappings": "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",
  "names": [
    "undefined",
    "constValue1",
    "constValue2",
    "constValue3",
    "constValue4",
    "constValue5",
    "constValue6",
    "constValue7",
    "constValue8",
    "constValue10",
    "constValue11",
    "ts.SyntaxKind.AnyKeyword",
    "ts.versionMajorMinor",
    "versionMajorMinor",
    "vmm",
    "mod.Hoge",
    "mod.Piyo",
    "constObject.a",
    "constObject.b",
    "constObject.c",
    "constObject.d",
    "constObject.e",
    "constObject.f",
    "constObject.g",
    "constObject.h.h1",
    "constObject.h.h2",
    "BarEnum.A",
    "BarEnum.B",
    "BazEnum.C",
    "BazEnum.D",
    "a",
    "b2",
    "e",
    "fn2()",
    "u",
  ],
  "sources": [
    "index.mts",
  ],
  "sourcesContent": [
    "import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = undefined;

console.log(
  constValue1,
  constValue2,
  constValue3,
  /* the comment */
  /* the comment */
  constValue4,
  /* the comment */
  constValue5,
  constValue6 /* the comment */,
  constValue7,
  /* the comment */
  constValue8.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  constValue10,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  constValue11 || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  constValue1 ? constValue2 : constValue3
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  ts.SyntaxKind.AnyKeyword,
  ts.versionMajorMinor,
  versionMajorMinor,
  vmm
);

console.log(mod.Hoge, (n as number) === mod.Hoge || (n as number) === mod.Piyo);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: undefined,
  f: 20n,
  g: -30n,
  h: {
    h1: constValue1,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  constObject.a,
  constObject.b,
  constObject.c,
  constObject.d,
  constObject.e,
  constObject.f,
  constObject.g,
  constObject.h,
  constObject.h.h1,
  constObject.h.h2,
  constObject.h.h3,
  //
  constObject.a.toString(),
  constObject.b.toString(),
  constObject.c.toString(),
  constObject.f.toString(),
  constObject.g.toString(),
  constObject.h.h1.toString(),
  constObject.h.h2.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(BarEnum.A, BarEnum.B);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(BazEnum.C, BazEnum.D);

(() => {
  const { a, b: b2, e = constValue3 } = constObject;
  console.log(a, b2, e);
})();

((x: number = constValue2) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(fn2());
// with annotation
console.log(/*@__PURE__*/ fn2(), /*#__PURE__*/ fn2());

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (u == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
",
  ],
  "version": 3,
}
`;

exports[`createTransformer and printSourceWithMap test with unsafeHoistFunctionCall: transformed source 1`] = `
"import * as ts from 'typescript';
import { versionMajorMinor as vmm } from 'typescript';
import { versionMajorMinor } from 'typescript';
import * as mod from './mod.mjs';

const constValue1 = 1;
const constValue2 = 0.1;
const constValue3 = -1;
const constValue4 = 'foo';
const constValue5 = true;
const constValue6 = 10n;
const constValue7 = -10n;
const constValue8 = \`aaa
bbb\`;
declare let n: number;
const constValue9 = \`bbb\${n}\`;
const constValue10 = !0;
const constValue11 = void 0 /* undefined */;

console.log(
  1 /* constValue1 */,
  0.1 /* constValue2 */,
  -1 /* constValue3 */,
  /* the comment */
  /* the comment */
  "foo" /* constValue4 */,
  /* the comment */
  true /* constValue5 */,
  10n /* constValue6 */ /* the comment */,
  -10n /* constValue7 */,
  /* the comment */
  "aaa\\nbbb" /* constValue8 */.toString() /* the comment */,
  // don't transform because constValue9 is not a literal type
  constValue9.toString(),
  // don't transform for asserted type
  (n as 10).toString(),
  true /* constValue10 */,
  // 'constValue11 || 12345' is literal type, but don't transform (instead transform 'constValue11')
  void 0 /* constValue11 */ || 12345,
  // 'constValue1 ? constValue2 : constValue3' is literal type, but don't transform
  1 /* constValue1 */ ? 0.1 /* constValue2 */ : -1 /* constValue3 */
);
export {
  constValue1,
  constValue2,
  constValue3,
  constValue4,
  constValue5,
  constValue6,
  constValue7,
  constValue8,
  constValue9,
};

// External values
console.log(
  133 /* ts.SyntaxKind.AnyKeyword */,
  "5.5" /* ts.versionMajorMinor */,
  "5.5" /* versionMajorMinor */,
  "5.5" /* vmm */
);

console.log(1 /* mod.Hoge */, (n as number) === 1 /* mod.Hoge */ || (n as number) === 2 /* mod.Piyo */);

export const constObject = {
  a: 4,
  b: 'bar',
  c: false,
  d: null,
  e: void 0 /* undefined */,
  f: 20n,
  g: -30n,
  h: {
    h1: 1 /* constValue1 */,
    h2: -3.14,
    h3: {},
  },
} as const;
console.log(
  4 /* constObject.a */,
  "bar" /* constObject.b */,
  false /* constObject.c */,
  null /* constObject.d */,
  void 0 /* constObject.e */,
  20n /* constObject.f */,
  -30n /* constObject.g */,
  constObject.h,
  1 /* constObject.h.h1 */,
  -3.14 /* constObject.h.h2 */,
  constObject.h.h3,
  //
  4 /* constObject.a */.toString(),
  "bar" /* constObject.b */.toString(),
  false /* constObject.c */.toString(),
  20n /* constObject.f */.toString(),
  -30n /* constObject.g */.toString(),
  1 /* constObject.h.h1 */.toString(),
  -3.14 /* constObject.h.h2 */.toString()
);

// don't transform here
declare let o: object;
console.log((o as typeof constObject).a);
console.log((o as typeof constObject).h.h1);

const enum BarEnum {
  A = 1,
  B = 'hoge',
}
console.log(1 /* BarEnum.A */, "hoge" /* BarEnum.B */);

enum BazEnum {
  C = 2,
  D = 'piyo',
}
console.log(2 /* BazEnum.C */, "piyo" /* BazEnum.D */);

(() => {
  const { a, b: b2, e = -1 /* constValue3 */ } = constObject;
  console.log(4 /* a */, "bar" /* b2 */, -1 /* e */);
})();

((x: number = 0.1 /* constValue2 */) => {
  console.log(x);
})();

function fn2() {
  return 12345 as const;
}
console.log(12345 /* fn2() */);
// with annotation
console.log(/*@__PURE__*/ 12345 /* fn2() */, /*#__PURE__*/ 12345 /* fn2() */);

// don't transform spread element and parameter declarations
console.log([...Array<undefined>(5)].map((u, i) => (void 0 /* u */ == null ? i : 0)));
const fn1 = (...args: undefined[]) => args.length;
console.log(fn1(...Array<undefined>(5)));

export {};
"
`;
